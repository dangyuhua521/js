<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        ul ul{
            display: none;
        }
        ul li span{
            display: block;
        }
    </style>
</head>
<body>
  <div class="box">
      <ul id="oUl">

      </ul>
  </div>
  <script>
      var arr = [
		    {
		        title : "第一级菜单",
		        child : [
		        	{title:"第二集菜单"},
		            {title:"第二集菜单",
		            child:[
		            		{title:"第三集菜单"},
		            		{title:"第三集菜单",
		            		child:[
		            			{title:"第四集菜单"},
		            			{title:"第四集菜单"},
		            			{title:"第四集菜单"}
		            		]
		            		},
		            		{title:"第三集菜单"}
		            	]
		        	},
		            {
		            	title:"第二集菜单",
		            	child:[
		            		{title:"第三集菜单"},
		            		{title:"第三集菜单"}
		            	]
		            }
		        ]
		    },
		    {
		        title : "第一级菜单",
		        child : [
		        	{title:"第二集菜单"},
		            {title:"第二集菜单",
		            child:[
		            		{title:"第三集菜单"},
		            		{title:"第三集菜单",
		            		child:[
		            			{title:"第四集菜单"},
		            			{title:"第四集菜单"},
		            			{title:"第四集菜单"}
		            		]
		            		},
		            		{title:"第三集菜单"}
		            	]
		        	},
		            {
		            	title:"第二集菜单",
		            	child:[
		            		{title:"第三集菜单"},
		            		{title:"第三集菜单"}
		            	]
		            }
		        ]
		    },
		    {
		    	title:"第一集菜单",
		    	child : [
		        	{title:"第二集菜单"},
		            {title:"第二集菜单",

		        	},
		            {
		            	title:"第二集菜单",
		            	child:[
		            		{title:"第三集菜单"},
		            		{title:"第三集菜单"}
		            	]
		            }
		        ]

		    }
		];
        var activeEle;
        var oUl = document.getElementById('oUl');
        //根据arr创建元素
        createEle(oUl,arr);
        function createEle(ele,newArr){
            for( var i = 0; i<newArr.length;i++){
                //创建li元素
                var newli = document.createElement('li');
                //判断拿到的arr是否有子元素
                //如果有子元素继续循环生成子元素
                //如果没有子元素则直接输出li
                if(newArr[i].child){
                    var newSpan = document.createElement('span');
                    newSpan.classList.add('add');
                    newSpan.innerText= newArr[i].title;
                    var newDiv = document.createElement('div');
                    var newUl = document.createElement('ul');
                    createEle(newUl,newArr[i].child);
                    newli.appendChild(newDiv);
                    newli.appendChild(newSpan);
                    newli.appendChild(newUl);
                    newSpan.onclick = function(){
                      // 如果点击的是关闭的菜单则打开菜单
                      if(this.className=='add'){
                          this.nextElementSibling.style.display='block';
                          this.className='line';
                          activeEle= this;

                      }else if(this.className == 'line'){
								this.nextElementSibling.style.display = '';
								this.className = 'add';
					    }  
                    }
                }else{
                    newli.innerHTML
                }
                ele.appendChild(newli)
            }
            
        }
       
  </script>  
</body>
</html>