<!DOCTYPE html>
<html lang="zh-cn">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title></title>
        <link rel="stylesheet" type="text/css" href="/style/css.css">
	</head>

	<body>
		<h1>做上传图片</h1>
		<input type="file" name="" id="files" />
		<button id="send">上传</button>
		<img src="" class="img" />
		<script type="text/javascript" src="/js/jquery-3.3.1.js"></script>
		<script>
			
			$('#send').click(function (){

				console.dir($('#files')[0].files[0]);
				// 上传图片的路径，不是图片本身
				console.dir($('#files')[0].value);

				//file

				let fd = new FormData();
				fd.append('file',$('#files')[0].files[0]);

				// 原生的：xhr.send(fd)

				$.ajax({
					url: '/api/update-file',
					method: 'post',
					data:fd,
					processData: false,
					contentType: false,  // 默认是'application/x-www-form-urlencoded; a=b&c=d
					success(data){
						console.log(data);
						if(data.code === 0){
							$('.img').attr('src',data.url)
						}
					}
				})	
			})

		</script>
	</body>
</html>